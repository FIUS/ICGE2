name: Validate commit

on:
  push:
    branches: [ master ]
  pull_request:

jobs:
  validate_format:
    name: Validate format
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Install xmlstarlet
      run: sudo apt-get install -y xmlstarlet
    - name: Setup java
      uses: actions/setup-java@v1
      with:
        java-version: 11
    - name: Validate format
      #git status returns zero exactly when there are no uncomitted changes
      run: ./scriptsAndTools/verifyFormat.sh && git status

  validate_javadoc:
    name: Validate javadoc
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Setup java
      uses: actions/setup-java@v1
      with:
        java-version: 11
    - name: Check Javadoc
      run: mvn -B compile javadoc:javadoc
